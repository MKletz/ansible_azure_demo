---
user_message: |
  You will need to update SNOW credentials with your SNOW instance details if you plan to demo this.

controller_components:
  - credential_types
  - credentials
  - job_templates

controller_credential_types:
  - name: "SNOW Credential Type"
    description: "credential to store SNOW"
    kind: cloud
    inputs:
      fields:
        - id: SN_USERNAME
          type: string
          label: Service Now Username
        - id: SN_PASSWORD
          type: string
          label: Service Now Password
          secret: true
        - id: SN_HOST
          type: string
          label: Service Now Instance URL
      required:
        - SN_USERNAME
        - SN_PASSWORD
        - SN_HOST

    injectors:
      extra_vars:
        SN_USERNAME: "{% raw %}{  { SN_USERNAME  }}{% endraw %}"
        SN_PASSWORD: "{% raw %}{  { SN_PASSWORD  }}{% endraw %}"
        SN_HOST: "{% raw %}{  { SN_HOST  }}{% endraw %}"
        SN_GRANT_TYPE: "password"

controller_credentials:
- name: SNOW Credential
  description: Credentials
  organization: Default
  credential_type: "SNOW Credential Type"
  inputs:
    SN_USERNAME: "admin" #update after install
    SN_PASSWORD: "XXX"   #update after install
    SN_HOST: "devXxxxx" #update after install

- name: Azure
  description: Credentials
  organization: Default
  credential_type: "Microsoft Azure Resource Manager"
  inputs:
    Subscription_ID: "changeme"

- name: Azure VM
  description: Credentials
  organization: Default
  credential_type: "Machine"
  inputs:
    username: "{{ admin_user }}"
    password: "{{ admin_password }}"

controller_templates:
- name: "AZURE / Create Infra"
  job_type: run
  inventory: "Workshop Inventory"
  project: "ansible_azure_demo"
  playbook: "azure/create_azure_env.yml"
  execution_environment: "Ansible Engine 2.9 execution environment"
  credentials:
    - "Azure"
  survey_enabled: false

- name: "AZURE / Create Windows VM"
  job_type: run
  inventory: "Workshop Inventory"
  project: "ansible_azure_demo"
  playbook: "azure/create_windows_vm.yml"
  execution_environment: "Ansible Engine 2.9 execution environment"
  credentials:
    - "Azure"
  survey_enabled: true
  survey:
    name: ''
    description: ''
    spec:
      - question_name: VM name
        type: text
        variable: vm_name
        required: true
      - question_name: Requested for?
        type: text
        variable: requested_for
        required: true
